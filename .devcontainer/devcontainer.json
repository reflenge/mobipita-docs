{
    // Dev Container の表示名
    "name": "mobipita-docs",
    // Dockerfile を使ってイメージをビルド
    "build": {
        "dockerfile": "../Dockerfile",
        "context": ".."
    },
    // コンテナ内のワークスペース
    "workspaceFolder": "/workspace",
    // Windows 側の作業フォルダを /workspace に bind mount する
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
    // Dockerfile の CMD は使わず、devcontainer の既定コマンドで起動する
    "overrideCommand": true,
    // bind mount で node_modules が隠れるため、作成時に依存関係を入れる
    "postCreateCommand": "pnpm install",
    // 起動時に開発サーバーを立ち上げる
    "postStartCommand": "pnpm run dev -- --host 0.0.0.0",
    "containerEnv": {
        "CHOKIDAR_USEPOLLING": "true",
        "CHOKIDAR_INTERVAL": "100",
        "PNPM_STORE_PATH": "/workspace/.pnpm-store"
    },

    "customizations": {
        "vscode": {
            // 事前に入れる VS Code 拡張
            "extensions": [
                "dbaeumer.vscode-eslint",
                "esbenp.prettier-vscode",
                "openai.chatgpt",
                "mhutchie.git-graph"
            ]
        }
    }
}
